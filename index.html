<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Terminal Farm - Befehlszeilen Farmspiel</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #0a0a0a;
            color: #00ff00;
            font-family: 'Courier New', monospace;
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        #header {
            padding: 20px;
            border-bottom: 2px solid #00ff00;
            background: #000;
        }

        #stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }

        .stat-box {
            border: 1px solid #00ff00;
            padding: 10px;
            background: #001100;
        }

        .stat-title {
            color: #00aa00;
            font-size: 12px;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 18px;
            font-weight: bold;
        }

        #terminal {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            font-size: 14px;
            line-height: 1.6;
        }

        #terminal::-webkit-scrollbar {
            width: 10px;
        }

        #terminal::-webkit-scrollbar-track {
            background: #0a0a0a;
        }

        #terminal::-webkit-scrollbar-thumb {
            background: #00ff00;
        }

        .output-line {
            margin: 5px 0;
        }

        .success {
            color: #00ff00;
        }

        .error {
            color: #ff0000;
        }

        .warning {
            color: #ffaa00;
        }

        .info {
            color: #00aaff;
        }

        #input-line {
            display: flex;
            padding: 15px 20px;
            border-top: 2px solid #00ff00;
            background: #000;
        }

        #prompt {
            color: #00ff00;
            margin-right: 10px;
        }

        #input {
            flex: 1;
            background: transparent;
            border: none;
            color: #00ff00;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            outline: none;
        }

        .growing {
            color: #ffaa00;
        }

        .ready {
            color: #00ff00;
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.3; }
        }

        .title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #00ff00;
        }
    </style>
</head>
<body>
    <div id="header">
        <div class="title">üåæ TERMINAL FARM v1.0 üåæ</div>
        <div id="stats">
            <div class="stat-box">
                <div class="stat-title">üí∞ GELD</div>
                <div class="stat-value" id="money">0</div>
            </div>
            <div class="stat-box">
                <div class="stat-title">üåæ WEIZEN</div>
                <div class="stat-value" id="wheat">0</div>
            </div>
            <div class="stat-box">
                <div class="stat-title">üçé √ÑPFEL</div>
                <div class="stat-value" id="apples">0</div>
            </div>
            <div class="stat-box">
                <div class="stat-title">üè∫ MEHL</div>
                <div class="stat-value" id="flour">0</div>
            </div>
            <div class="stat-box">
                <div class="stat-title">üåæ WEIZENFELDER</div>
                <div class="stat-value" id="wheatFields">3</div>
            </div>
            <div class="stat-box">
                <div class="stat-title">üçé APFELB√ÑUME</div>
                <div class="stat-value" id="appleTrees">2</div>
            </div>
            <div class="stat-box">
                <div class="stat-title">‚öôÔ∏è M√úHLEN</div>
                <div class="stat-value" id="mills">1</div>
            </div>
        </div>
    </div>

    <div id="terminal"></div>

    <div id="input-line">
        <span id="prompt">farm@terminal:~$</span>
        <input type="text" id="input" autocomplete="off" autofocus>
    </div>

    <script>
        // Game State
        const game = {
            money: 50,
            wheat: 0,
            apples: 0,
            flour: 0,
            wheatFields: 3,
            appleTrees: 2,
            mills: 1,
            wheatGrowing: [],
            applesGrowing: [],
            flourProducing: [],
            prices: {
                wheat: 8,
                apple: 15,
                flour: 25,
                wheatField: 100,
                appleTree: 200,
                mill: 400
            },
            growthTimes: {
                wheat: 30000,    // 30 Sekunden
                apple: 60000,    // 1 Minute
                flour: 120000    // 2 Minuten
            }
        };

        // Load saved game
        function loadGame() {
            const saved = localStorage.getItem('terminalFarmSave');
            if (saved) {
                const data = JSON.parse(saved);
                Object.assign(game, data);
                // Restart growing items
                game.wheatGrowing = game.wheatGrowing.map(item => ({
                    ...item,
                    startTime: Date.now() - (item.elapsed || 0)
                }));
                game.applesGrowing = game.applesGrowing.map(item => ({
                    ...item,
                    startTime: Date.now() - (item.elapsed || 0)
                }));
                game.flourProducing = game.flourProducing.map(item => ({
                    ...item,
                    startTime: Date.now() - (item.elapsed || 0)
                }));
            }
        }

        // Save game
        function saveGame() {
            const data = {
                ...game,
                wheatGrowing: game.wheatGrowing.map(item => ({
                    ...item,
                    elapsed: Date.now() - item.startTime
                })),
                applesGrowing: game.applesGrowing.map(item => ({
                    ...item,
                    elapsed: Date.now() - item.startTime
                })),
                flourProducing: game.flourProducing.map(item => ({
                    ...item,
                    elapsed: Date.now() - item.startTime
                }))
            };
            localStorage.setItem('terminalFarmSave', JSON.stringify(data));
        }

        // Terminal output
        const terminal = document.getElementById('terminal');
        const input = document.getElementById('input');

        function print(text, className = '') {
            const line = document.createElement('div');
            line.className = 'output-line ' + className;
            line.textContent = text;
            terminal.appendChild(line);
            terminal.scrollTop = terminal.scrollHeight;
        }

        function printWelcome() {
            print('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê', 'info');
            print('   Willkommen bei TERMINAL FARM!', 'info');
            print('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê', 'info');
            print('');
            print('Du bist Besitzer einer kleinen Farm. Baue Pflanzen an,', 'info');
            print('produziere Waren und verkaufe sie am Markt!', 'info');
            print('');
            print('Starte mit: 3 Weizenfeldern, 2 Apfelb√§umen, 1 M√ºhle', 'success');
            print('');
            print('Tippe "help" f√ºr alle Befehle!', 'warning');
            print('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê', 'info');
            print('');
        }

        // Update stats display
        function updateStats() {
            document.getElementById('money').textContent = game.money + ' ‚Ç¨';
            document.getElementById('wheat').textContent = game.wheat;
            document.getElementById('apples').textContent = game.apples;
            document.getElementById('flour').textContent = game.flour;
            document.getElementById('wheatFields').textContent = game.wheatFields;
            document.getElementById('appleTrees').textContent = game.appleTrees;
            document.getElementById('mills').textContent = game.mills;
            saveGame();
        }

        // Commands
        const commands = {
            help: () => {
                print('‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó', 'info');
                print('‚ïë              VERF√úGBARE BEFEHLE                  ‚ïë', 'info');
                print('‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù', 'info');
                print('');
                print('üå± ANBAUEN:', 'success');
                print('  plant wheat [anzahl]  - Weizen anpflanzen (30s)');
                print('  plant apple [anzahl]  - √Ñpfel anpflanzen (60s)');
                print('  produce flour [anzahl] - Mehl herstellen (120s, kostet 2 Weizen)');
                print('');
                print('üì¶ ERNTEN:', 'success');
                print('  harvest wheat [anzahl] - Weizen ernten');
                print('  harvest apple [anzahl] - √Ñpfel ernten');
                print('  harvest flour [anzahl] - Mehl einsammeln');
                print('  harvest all           - Alles fertige ernten');
                print('');
                print('üí∞ VERKAUFEN:', 'success');
                print('  sell wheat [anzahl]   - Weizen verkaufen (8‚Ç¨)');
                print('  sell apple [anzahl]   - √Ñpfel verkaufen (15‚Ç¨)');
                print('  sell flour [anzahl]   - Mehl verkaufen (25‚Ç¨)');
                print('  sell all              - Alles verkaufen');
                print('');
                print('üèóÔ∏è KAUFEN:', 'success');
                print('  buy field             - Weizenfeld kaufen (100‚Ç¨)');
                print('  buy tree              - Apfelbaum kaufen (200‚Ç¨)');
                print('  buy mill              - M√ºhle kaufen (400‚Ç¨)');
                print('');
                print('üìä INFO:', 'success');
                print('  status    - Zeige Farm-Status');
                print('  prices    - Zeige Preise');
                print('  growing   - Zeige wachsende Pflanzen');
                print('  clear     - Bildschirm leeren');
                print('');
            },

            status: () => {
                print('‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó', 'info');
                print('‚ïë              FARM STATUS                         ‚ïë', 'info');
                print('‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù', 'info');
                print('');
                print(`üí∞ Geld: ${game.money} ‚Ç¨`, 'success');
                print('');
                print('üì¶ LAGER:', 'warning');
                print(`  üåæ Weizen: ${game.wheat}`);
                print(`  üçé √Ñpfel: ${game.apples}`);
                print(`  üè∫ Mehl: ${game.flour}`);
                print('');
                print('üèóÔ∏è GEB√ÑUDE:', 'warning');
                print(`  üåæ Weizenfelder: ${game.wheatFields}`);
                print(`  üçé Apfelb√§ume: ${game.appleTrees}`);
                print(`  ‚öôÔ∏è M√ºhlen: ${game.mills}`);
                print('');
                print('üå± AKTIV:', 'warning');
                print(`  Weizen w√§chst: ${game.wheatGrowing.length}/${game.wheatFields}`);
                print(`  √Ñpfel wachsen: ${game.applesGrowing.length}/${game.appleTrees}`);
                print(`  Mehl produziert: ${game.flourProducing.length}/${game.mills}`);
                print('');
            },

            prices: () => {
                print('‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó', 'info');
                print('‚ïë              MARKTPREISE                         ‚ïë', 'info');
                print('‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù', 'info');
                print('');
                print('üí∞ VERKAUFSPREISE:', 'success');
                print(`  üåæ Weizen: ${game.prices.wheat} ‚Ç¨`);
                print(`  üçé Apfel: ${game.prices.apple} ‚Ç¨`);
                print(`  üè∫ Mehl: ${game.prices.flour} ‚Ç¨`);
                print('');
                print('üèóÔ∏è KAUFPREISE:', 'warning');
                print(`  üåæ Weizenfeld: ${game.prices.wheatField} ‚Ç¨`);
                print(`  üçé Apfelbaum: ${game.prices.appleTree} ‚Ç¨`);
                print(`  ‚öôÔ∏è M√ºhle: ${game.prices.mill} ‚Ç¨`);
                print('');
            },

            growing: () => {
                print('üå± WACHSTUMS-STATUS:', 'info');
                print('');
                
                if (game.wheatGrowing.length > 0) {
                    print(`üåæ WEIZEN (${game.wheatGrowing.length}):`, 'success');
                    game.wheatGrowing.forEach((item, i) => {
                        const elapsed = Date.now() - item.startTime;
                        const remaining = Math.max(0, Math.ceil((game.growthTimes.wheat - elapsed) / 1000));
                        if (remaining > 0) {
                            print(`  [${i+1}] Noch ${remaining}s...`, 'growing');
                        } else {
                            print(`  [${i+1}] ‚úì FERTIG!`, 'ready');
                        }
                    });
                    print('');
                }

                if (game.applesGrowing.length > 0) {
                    print(`üçé √ÑPFEL (${game.applesGrowing.length}):`, 'success');
                    game.applesGrowing.forEach((item, i) => {
                        const elapsed = Date.now() - item.startTime;
                        const remaining = Math.max(0, Math.ceil((game.growthTimes.apple - elapsed) / 1000));
                        if (remaining > 0) {
                            print(`  [${i+1}] Noch ${remaining}s...`, 'growing');
                        } else {
                            print(`  [${i+1}] ‚úì FERTIG!`, 'ready');
                        }
                    });
                    print('');
                }

                if (game.flourProducing.length > 0) {
                    print(`üè∫ MEHL (${game.flourProducing.length}):`, 'success');
                    game.flourProducing.forEach((item, i) => {
                        const elapsed = Date.now() - item.startTime;
                        const remaining = Math.max(0, Math.ceil((game.growthTimes.flour - elapsed) / 1000));
                        if (remaining > 0) {
                            print(`  [${i+1}] Noch ${remaining}s...`, 'growing');
                        } else {
                            print(`  [${i+1}] ‚úì FERTIG!`, 'ready');
                        }
                    });
                    print('');
                }

                if (game.wheatGrowing.length === 0 && game.applesGrowing.length === 0 && game.flourProducing.length === 0) {
                    print('Nichts w√§chst gerade.', 'warning');
                    print('');
                }
            },

            plant: (args) => {
                const type = args[0];
                const amount = parseInt(args[1]) || 1;

                if (type === 'wheat') {
                    const available = game.wheatFields - game.wheatGrowing.length;
                    if (amount > available) {
                        print(`‚ùå Nur ${available} Felder verf√ºgbar!`, 'error');
                        return;
                    }
                    for (let i = 0; i < amount; i++) {
                        game.wheatGrowing.push({ startTime: Date.now() });
                    }
                    print(`‚úì ${amount}x Weizen angepflanzt! (30s)`, 'success');
                } else if (type === 'apple') {
                    const available = game.appleTrees - game.applesGrowing.length;
                    if (amount > available) {
                        print(`‚ùå Nur ${available} B√§ume verf√ºgbar!`, 'error');
                        return;
                    }
                    for (let i = 0; i < amount; i++) {
                        game.applesGrowing.push({ startTime: Date.now() });
                    }
                    print(`‚úì ${amount}x √Ñpfel angepflanzt! (60s)`, 'success');
                } else {
                    print('‚ùå Unbekannter Typ! Nutze: wheat oder apple', 'error');
                    return;
                }
                updateStats();
            },

            produce: (args) => {
                const type = args[0];
                const amount = parseInt(args[1]) || 1;

                if (type === 'flour') {
                    const available = game.mills - game.flourProducing.length;
                    if (amount > available) {
                        print(`‚ùå Nur ${available} M√ºhlen verf√ºgbar!`, 'error');
                        return;
                    }
                    const wheatNeeded = amount * 2;
                    if (game.wheat < wheatNeeded) {
                        print(`‚ùå Du brauchst ${wheatNeeded} Weizen! (Du hast ${game.wheat})`, 'error');
                        return;
                    }
                    game.wheat -= wheatNeeded;
                    for (let i = 0; i < amount; i++) {
                        game.flourProducing.push({ startTime: Date.now() });
                    }
                    print(`‚úì ${amount}x Mehl wird produziert! (120s, -${wheatNeeded} Weizen)`, 'success');
                } else {
                    print('‚ùå Unbekannter Typ! Nutze: flour', 'error');
                    return;
                }
                updateStats();
            },

            harvest: (args) => {
                const type = args[0];
                let harvested = 0;

                if (type === 'all') {
                    // Harvest wheat
                    const readyWheat = game.wheatGrowing.filter(item => 
                        Date.now() - item.startTime >= game.growthTimes.wheat
                    );
                    game.wheat += readyWheat.length;
                    game.wheatGrowing = game.wheatGrowing.filter(item => 
                        Date.now() - item.startTime < game.growthTimes.wheat
                    );
                    if (readyWheat.length > 0) print(`‚úì ${readyWheat.length}x Weizen geerntet!`, 'success');

                    // Harvest apples
                    const readyApples = game.applesGrowing.filter(item => 
                        Date.now() - item.startTime >= game.growthTimes.apple
                    );
                    game.apples += readyApples.length;
                    game.applesGrowing = game.applesGrowing.filter(item => 
                        Date.now() - item.startTime < game.growthTimes.apple
                    );
                    if (readyApples.length > 0) print(`‚úì ${readyApples.length}x √Ñpfel geerntet!`, 'success');

                    // Harvest flour
                    const readyFlour = game.flourProducing.filter(item => 
                        Date.now() - item.startTime >= game.growthTimes.flour
                    );
                    game.flour += readyFlour.length;
                    game.flourProducing = game.flourProducing.filter(item => 
                        Date.now() - item.startTime < game.growthTimes.flour
                    );
                    if (readyFlour.length > 0) print(`‚úì ${readyFlour.length}x Mehl geerntet!`, 'success');

                    if (readyWheat.length + readyApples.length + readyFlour.length === 0) {
                        print('‚ùå Nichts bereit zum Ernten!', 'error');
                    }
                } else if (type === 'wheat') {
                    const amount = parseInt(args[1]) || 999;
                    const readyWheat = game.wheatGrowing.filter(item => 
                        Date.now() - item.startTime >= game.growthTimes.wheat
                    ).slice(0, amount);
                    
                    if (readyWheat.length === 0) {
                        print('‚ùå Kein Weizen bereit zum Ernten!', 'error');
                        return;
                    }
                    
                    game.wheat += readyWheat.length;
                    game.wheatGrowing = game.wheatGrowing.filter(item => 
                        !readyWheat.includes(item)
                    );
                    print(`‚úì ${readyWheat.length}x Weizen geerntet!`, 'success');
                } else if (type === 'apple') {
                    const amount = parseInt(args[1]) || 999;
                    const readyApples = game.applesGrowing.filter(item => 
                        Date.now() - item.startTime >= game.growthTimes.apple
                    ).slice(0, amount);
                    
                    if (readyApples.length === 0) {
                        print('‚ùå Keine √Ñpfel bereit zum Ernten!', 'error');
                        return;
                    }
                    
                    game.apples += readyApples.length;
                    game.applesGrowing = game.applesGrowing.filter(item => 
                        !readyApples.includes(item)
                    );
                    print(`‚úì ${readyApples.length}x √Ñpfel geerntet!`, 'success');
                } else if (type === 'flour') {
                    const amount = parseInt(args[1]) || 999;
                    const readyFlour = game.flourProducing.filter(item => 
                        Date.now() - item.startTime >= game.growthTimes.flour
                    ).slice(0, amount);
                    
                    if (readyFlour.length === 0) {
                        print('‚ùå Kein Mehl bereit zum Ernten!', 'error');
                        return;
                    }
                    
                    game.flour += readyFlour.length;
                    game.flourProducing = game.flourProducing.filter(item => 
                        !readyFlour.includes(item)
                    );
                    print(`‚úì ${readyFlour.length}x Mehl geerntet!`, 'success');
                } else {
                    print('‚ùå Unbekannter Typ! Nutze: wheat, apple, flour oder all', 'error');
                    return;
                }
                updateStats();
            },

            sell: (args) => {
                const type = args[0];

                if (type === 'all') {
                    const total = (game.wheat * game.prices.wheat) + 
                                (game.apples * game.prices.apple) + 
                                (game.flour * game.prices.flour);
                    if (total === 0) {
                        print('‚ùå Nichts zum Verkaufen!', 'error');
                        return;
                    }
                    print(`‚úì Verkauft: ${game.wheat} Weizen, ${game.apples} √Ñpfel, ${game.flour} Mehl`, 'success');
                    print(`üí∞ +${total} ‚Ç¨ erhalten!`, 'success');
                    game.money += total;
                    game.wheat = 0;
                    game.apples = 0;
                    game.flour = 0;
                } else if (type === 'wheat') {
                    const amount = parseInt(args[1]) || game.wheat;
                    if (amount > game.wheat) {
                        print(`‚ùå Du hast nur ${game.wheat} Weizen!`, 'error');
                        return;
                    }
                    const earned = amount * game.prices.wheat;
                    game.wheat -= amount;
                    game.money += earned;
                    print(`‚úì ${amount}x Weizen verkauft! (+${earned} ‚Ç¨)`, 'success');
                } else if (type === 'apple') {
                    const amount = parseInt(args[1]) || game.apples;
                    if (amount > game.apples) {
                        print(`‚ùå Du hast nur ${game.apples} √Ñpfel!`, 'error');
                        return;
                    }
                    const earned = amount * game.prices.apple;
                    game.apples -= amount;
                    game.money += earned;
                    print(`‚úì ${amount}x √Ñpfel verkauft! (+${earned} ‚Ç¨)`, 'success');
                } else if (type === 'flour') {
                    const amount = parseInt(args[1]) || game.flour;
                    if (amount > game.flour) {
                        print(`‚ùå Du hast nur ${game.flour} Mehl!`, 'error');
                        return;
                    }
                    const earned = amount * game.prices.flour;
                    game.flour -= amount;
                    game.money += earned;
                    print(`‚úì ${amount}x Mehl verkauft! (+${earned} ‚Ç¨)`, 'success');
                } else {
                    print('‚ùå Unbekannter Typ! Nutze: wheat, apple, flour oder all', 'error');
                    return;
                }
                updateStats();
            },

            buy: (args) => {
                const type = args[0];

                if (type === 'field') {
                    if (game.money < game.prices.wheatField) {
                        print(`‚ùå Nicht genug Geld! Ben√∂tigt: ${game.prices.wheatField} ‚Ç¨`, 'error');
                        return;
                    }
                    game.money -= game.prices.wheatField;
                    game.wheatFields++;
                    print(`‚úì Weizenfeld gekauft! (-${game.prices.wheatField} ‚Ç¨)`, 'success');
                } else if (type === 'tree') {
                    if (game.money < game.prices.appleTree) {
                        print(`‚ùå Nicht genug Geld! Ben√∂tigt: ${game.prices.appleTree} ‚Ç¨`, 'error');
                        return;
                    }
                    game.money -= game.prices.appleTree;
                    game.appleTrees++;
                    print(`‚úì Apfelbaum gekauft! (-${game.prices.appleTree} ‚Ç¨)`, 'success');
                } else if (type === 'mill') {
                    if (game.money < game.prices.mill) {
                        print(`‚ùå Nicht genug Geld! Ben√∂tigt: ${game.prices.mill} ‚Ç¨`, 'error');
                        return;
                    }
                    game.money -= game.prices.mill;
                    game.mills++;
                    print(`‚úì M√ºhle gekauft! (-${game.prices.mill} ‚Ç¨)`, 'success');
                } else {
                    print('‚ùå Unbekannter Typ! Nutze: field, tree oder mill', 'error');
                    return;
                }
                updateStats();
            },

            clear: () => {
                terminal.innerHTML = '';
            }
        };

        // Process command
        function processCommand(cmd) {
            print(`farm@terminal:~$ ${cmd}`, 'info');
            
            const parts = cmd.trim().toLowerCase().split(/\s+/);
            const command = parts[0];
            const args = parts.slice(1);

            if (commands[command]) {
                commands[command](args);
            } else if (cmd.trim() === '') {
                // Do nothing
            } else {
                print(`‚ùå Befehl nicht gefunden: ${command}`, 'error');
                print('Tippe "help" f√ºr alle Befehle.', 'warning');
            }
            print('');
        }

        // Input handling
        input.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                const cmd = input.value;
                input.value = '';
                processCommand(cmd);
            }
        });

        // Keep input focused
        document.addEventListener('click', () => {
            input.focus();
        });

        // Auto-save every 10 seconds
        setInterval(saveGame, 10000);

        // Update stats every second
        setInterval(updateStats, 1000);

        // Initialize
        loadGame();
        updateStats();
        printWelcome();
    </script>
</body>
</html>
